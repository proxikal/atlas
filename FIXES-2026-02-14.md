# Atlas v0.2 Fixes - 2026-02-14

## What Was Broken

### 1. STATUS.md Category Ordering
- ‚ùå Foundation (category 0) marked as "deferred"
- ‚ùå Stdlib (category 1) started first
- ‚ùå Foundation has dependencies that stdlib NEEDS
- ‚ùå Result: Constant blockers every 2-3 phases

### 2. Progress Reporting
- ‚ùå Claimed "10.3% complete (7/68 phases)"
- ‚ùå Actually ~3% complete (only 2 foundation phases done)
- ‚ùå 5 stdlib phases will hit foundation walls soon
- ‚ùå "ALL FOUNDATION BLOCKERS COMPLETE" - FALSE

### 3. Atlas Skill GATE -1
- ‚ùå Asked USER technical questions
- ‚ùå "Should we implement nested functions?" (3 hours wasted)
- ‚ùå Didn't check spec first
- ‚ùå Treated spec as suggestion, not law
- ‚ùå Confused architect role (strategic) with developer role (technical)

### 4. Phase Blocker Sections
- ‚ùå Vague "may need" language
- ‚ùå "If missing, check if ready" - but no HOW to check
- ‚ùå No spec references
- ‚ùå Forces AI to ask user for technical decisions

---

## What Was Fixed

### 1. STATUS.md Updated ‚úÖ
**Changes:**
- Status: "Foundation Infrastructure Build Phase (Required Before v0.2 Features)"
- Next phase: `foundation/phase-01` (not stdlib/phase-06)
- Foundation progress: 2/17 (honest)
- Real progress: 3% (honest, not 10.3%)
- Shows üö® blockers in all categories
- Critical path clearly defined (8 foundation phases to unblock v0.2)

**Category ordering now matches execution order:**
0. Foundation (2/17) - **DO FIRST**
1. Stdlib (5/15) - blockers at phase 10+
2. Bytecode-VM (0/8) - no foundation deps
3. Frontend (0/5) - blockers immediately
4. Typing (0/7) - TBD
5. Interpreter (0/2) - TBD
6. CLI (0/6) - blockers immediately
7. LSP (0/5) - TBD
8. Polish (0/5) - final phase

---

### 2. Atlas Skill GATE -1 Rewritten ‚úÖ

**File:** `.claude/skills/atlas/gates/gate-minus1-sanity.md`

**New Process:**
1. **Part 1: Communication Check** (always)
   - Verify using spec/docs FIRST (not user)
   - Brutally honest, short, informative

2. **Part 2: Spec-First Verification** (for implementation)
   - Read phase blockers autonomously
   - Verify EACH dependency using spec/docs
   - Make technical decisions using spec as law
   - Log decisions in decision-log.md
   - NEVER ask user technical questions

3. **Part 3: Sanity Check** (after spec verification)
   - Only ask ARCHITECTURAL questions
   - Strategic decisions only (priorities, trade-offs)

**Question Decision Tree Added:**
- **TECHNICAL** (AI decides): "How should X work?" ‚Üí Check spec
- **ARCHITECTURAL** (ask user): "Should we prioritize X or Y?" ‚Üí Ask user

**Examples:**
- ‚ùå BAD: "Should we implement nested functions?" (asks user)
- ‚úÖ GOOD: Checks `docs/specification/syntax.md` section 4.2, implements per spec, logs decision

---

### 3. Blocker Template Created ‚úÖ

**File:** `.claude/skills/atlas/BLOCKER-TEMPLATE.md`

**Shows:**
- ‚ùå Bad blocker examples (vague, asks user, no verification)
- ‚úÖ Good blocker examples (spec-referenced, concrete verification, decision trees)
- Template for new phases
- Red flags vs green flags
- Phase audit checklist

**Good Blocker Structure:**
```markdown
## üö® BLOCKERS - CHECK BEFORE STARTING

**REQUIRED:** [Feature] must [condition].

**Verification Steps:**
1. Check spec: `docs/specification/[file].md` section [N]
2. Check implementation: [concrete grep/ls/cargo commands]
3. [Additional verification]

**Spec Requirements:** [from spec section N]

**Decision Tree:**
a) If exists and matches spec ‚Üí Proceed
b) If exists but incomplete ‚Üí Implement per spec, log
c) If doesn't exist ‚Üí Stop, report prerequisite needed
d) If spec doesn't define ‚Üí Flag as spec gap, ask architectural question
```

---

### 4. Skill.md Updated ‚úÖ

**File:** `.claude/skills/atlas/skill.md`

**Changes:**
- GATE -1 section rewritten to reflect spec-first approach
- Added "KEY: AI = Lead Developer (technical), User = Architect (strategic)"
- Removed vague "open discussion" language
- Added explicit spec verification requirements

---

## Foundation Phase Critical Path

**Complete these 8 phases to unblock most of v0.2:**

1. ‚úÖ Phase 01 - Runtime API (no blockers)
2. ‚úÖ Phase 04 - Configuration (no blockers)
3. ‚úÖ Phase 06 - Module System (no blockers)
4. ‚úÖ Phase 09 - Result Types (no blockers)
5. ‚¨ú Phase 02 - Embedding API (needs 01)
6. ‚¨ú Phase 10 - FFI (no blockers)
7. ‚¨ú Phase 07 - Package Manifest (needs 04, 06)
8. ‚¨ú Phase 15 - Security (needs 01, 02, 10)

**This unblocks:**
- Frontend/01 (Enhanced Errors) ‚úÖ
- Stdlib/10-15 (HTTP, Async, etc.) ‚úÖ
- CLI/01 (Formatter CLI) ‚úÖ
- Most of v0.2 ‚úÖ

---

## What Changed in Workflow

### Before (Broken):
1. User: "Start phase X"
2. AI: Reads phase, sees blocker
3. AI: "Is dependency Y ready?"
4. User: "Make it standards compliant" (vague)
5. AI: Builds wrong thing for 3 hours
6. Still fixing errors

### After (Fixed):
1. User: "Start phase X"
2. AI: Reads phase, sees blocker
3. AI: Checks `docs/specification/[file].md` section N
4. AI: Verifies implementation matches spec
5. AI: **Makes decision autonomously**, logs it
6. AI: Proceeds with implementation (or stops if prerequisite missing)
7. User: Never asked technical questions

---

## Files Modified

1. `STATUS.md` - Category ordering, progress, next phase
2. `.claude/skills/atlas/skill.md` - GATE -1 section, role clarity
3. `.claude/skills/atlas/gates/gate-minus1-sanity.md` - Complete rewrite
4. `.claude/skills/atlas/BLOCKER-TEMPLATE.md` - New template/guide

---

## Next Steps

1. ‚úÖ Start foundation/phase-01 (Runtime API)
2. ‚úÖ Follow critical path (8 foundation phases)
3. ‚úÖ AI will verify blockers autonomously using spec
4. ‚úÖ AI will only ask architectural questions
5. ‚úÖ No more 3-hour detours building wrong features

---

## Philosophy Reinforced

**AI = Lead Developer**
- Makes technical decisions using spec/docs as source of truth
- Implements features per specification exactly
- Logs decisions for transparency
- Reserves user interaction for architecture only

**User = Architect**
- Sets strategic direction
- Makes architectural trade-offs (performance vs memory, v0.2 vs v0.3 scope)
- Defines priorities
- Reviews and approves major changes

**Spec = Law**
- Specification defines language behavior
- Implementation guides show how to build
- When spec conflicts with phase: Follow spec, flag conflict
- When spec is silent: Check if out-of-scope, propose alternatives

---

**Status:** Foundation infrastructure ready. Atlas skill fixed. Ready to execute v0.2 properly.
